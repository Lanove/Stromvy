Version 4
SHEET 1 1992 680
WIRE 16 -576 -48 -576
WIRE 224 -576 80 -576
WIRE 224 -544 224 -576
WIRE 224 -544 96 -544
WIRE 96 -512 96 -544
WIRE 128 -512 96 -512
WIRE 224 -496 224 -544
WIRE 224 -496 192 -496
WIRE 240 -496 224 -496
WIRE 304 -496 304 -512
WIRE 352 -496 304 -496
WIRE 608 -496 448 -496
WIRE 672 -496 608 -496
WIRE -304 -480 -352 -480
WIRE -192 -480 -224 -480
WIRE -160 -480 -192 -480
WIRE -48 -480 -48 -576
WIRE -48 -480 -80 -480
WIRE -32 -480 -48 -480
WIRE 80 -480 48 -480
WIRE 128 -480 80 -480
WIRE 832 -480 720 -480
WIRE -192 -448 -192 -480
WIRE 80 -448 80 -480
WIRE 832 -448 832 -480
WIRE 608 -432 608 -496
WIRE 608 -432 576 -432
WIRE 768 -432 720 -432
WIRE 560 -416 576 -432
WIRE 608 -416 608 -432
WIRE 768 -416 768 -432
WIRE -192 -368 -192 -384
WIRE 80 -368 80 -384
WIRE 832 -352 832 -368
WIRE 576 -336 560 -352
WIRE 608 -336 608 -352
WIRE 608 -336 576 -336
WIRE 672 -336 608 -336
WIRE 112 -304 -48 -304
WIRE 224 -304 176 -304
WIRE 400 -288 400 -432
WIRE 672 -288 672 -336
WIRE 224 -272 224 -304
WIRE 224 -272 96 -272
WIRE 96 -240 96 -272
WIRE 128 -240 96 -240
WIRE 224 -224 224 -272
WIRE 224 -224 192 -224
WIRE 240 -224 224 -224
WIRE -304 -208 -352 -208
WIRE -192 -208 -224 -208
WIRE -160 -208 -192 -208
WIRE -48 -208 -48 -304
WIRE -48 -208 -80 -208
WIRE -32 -208 -48 -208
WIRE 80 -208 48 -208
WIRE 128 -208 80 -208
WIRE 672 -208 672 -288
WIRE -192 -176 -192 -208
WIRE 80 -176 80 -208
WIRE 672 -112 672 -128
WIRE -192 -96 -192 -112
WIRE 80 -96 80 -112
WIRE 384 -32 400 -64
WIRE 496 -32 480 -64
WIRE 656 -16 640 -16
WIRE 752 -16 736 -16
WIRE 800 -16 752 -16
WIRE 1056 0 1024 0
WIRE 1072 0 1056 0
WIRE 1344 0 1152 0
WIRE 1376 0 1344 0
WIRE 1424 0 1376 0
WIRE 384 16 384 -32
WIRE 384 16 352 16
WIRE 1024 32 1024 0
WIRE 384 48 384 16
WIRE 400 48 384 48
WIRE 496 64 496 -32
WIRE 496 64 464 64
WIRE 528 64 496 64
WIRE 752 64 752 -16
WIRE 752 64 608 64
WIRE 768 64 752 64
WIRE 400 80 384 80
WIRE 864 80 864 -16
WIRE 864 80 832 80
WIRE 880 80 864 80
WIRE 768 96 752 96
WIRE 1344 96 1344 0
WIRE 384 128 384 80
WIRE 384 128 352 128
WIRE 400 128 384 128
WIRE 800 128 800 112
WIRE 400 144 400 128
WIRE 608 144 576 144
WIRE 752 144 752 96
WIRE 752 144 688 144
WIRE 1056 144 1056 0
WIRE 1184 144 1056 144
WIRE 1280 144 1264 144
WIRE 1024 160 1024 128
WIRE 1424 160 1424 0
WIRE -416 176 -416 160
WIRE -416 176 -480 176
WIRE -304 176 -304 160
WIRE -304 176 -416 176
WIRE -208 176 -208 160
WIRE -208 176 -304 176
WIRE -112 176 -112 160
WIRE -112 176 -208 176
WIRE -480 192 -480 176
WIRE 1344 208 1344 192
WIRE 1360 208 1344 208
WIRE 656 224 640 224
WIRE 752 224 752 144
WIRE 752 224 736 224
WIRE 400 240 400 224
WIRE 1424 272 1424 256
WIRE 1440 272 1424 272
WIRE 1552 272 1520 272
WIRE 1424 288 1424 272
WIRE 512 304 464 304
WIRE 768 304 752 304
WIRE 864 304 848 304
WIRE 672 320 656 320
WIRE 752 320 752 304
WIRE 1360 336 1344 336
WIRE 928 352 928 304
WIRE 928 352 896 352
WIRE 1344 352 1344 336
WIRE 1056 368 1056 144
WIRE 192 384 176 384
WIRE 288 384 272 384
WIRE 384 384 384 304
WIRE 384 384 368 384
WIRE 416 384 384 384
WIRE 1216 384 1168 384
WIRE 176 400 176 384
WIRE 512 400 512 304
WIRE 512 400 480 400
WIRE 544 400 512 400
WIRE 752 400 752 320
WIRE 752 400 624 400
WIRE 768 400 752 400
WIRE 1168 400 1168 384
WIRE 1264 400 1264 144
WIRE 1280 400 1264 400
WIRE 416 416 384 416
WIRE 896 416 896 352
WIRE 896 416 832 416
WIRE 912 416 896 416
WIRE 768 432 752 432
WIRE 192 464 160 464
WIRE 288 464 272 464
WIRE 384 464 384 416
WIRE 384 464 368 464
WIRE 800 464 800 448
WIRE 1216 464 1216 384
WIRE 1344 464 1344 448
WIRE 1344 464 1216 464
WIRE 1424 464 1424 384
WIRE 1424 464 1344 464
WIRE 640 480 608 480
WIRE 752 480 752 432
WIRE 752 480 720 480
WIRE 1056 496 1056 464
FLAG -480 192 0
FLAG -416 80 VA+
FLAG -416 256 VA-
FLAG -304 80 +24V
FLAG -208 80 I_SET
FLAG -112 80 V_SET
FLAG 80 -96 0
FLAG -192 -96 0
FLAG -352 -208 I_SET
FLAG 240 -224 SKI
FLAG 80 -368 0
FLAG -192 -368 0
FLAG -352 -480 V_SET
FLAG 240 -496 SKV
FLAG 304 -512 +24V
FLAG 672 -112 0
FLAG 160 -256 VA+
FLAG 160 -192 VA-
FLAG 160 -464 VA-
FLAG 160 -528 VA+
FLAG 400 240 0
FLAG 672 -496 OUT+
FLAG 672 -288 OUT-
FLAG 272 16 OUT-
FLAG 272 128 OUT+
FLAG 576 -16 OUT+
FLAG 576 224 OUT-
FLAG 576 144 SKV
FLAG 448 368 VA+
FLAG 448 432 VA-
FLAG 176 400 0
FLAG 160 464 OUT-
FLAG 592 320 OUT+
FLAG 400 -288 TR_DRIVE
FLAG 432 32 VA+
FLAG 432 96 VA-
FLAG 800 384 +24V
FLAG 800 48 +24V
FLAG 768 -416 0
FLAG 832 -352 0
FLAG 608 480 SKI
FLAG 1168 400 0
FLAG 1552 272 TR_DRIVE
FLAG 1376 0 +24V
FLAG 1056 496 0
FLAG 1024 160 0
FLAG 928 352 U6_OUT
FLAG 864 -16 U4_OUT
FLAG 800 128 VA-
FLAG 800 464 VA-
SYMBOL voltage -416 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 56 Left 2
SYMATTR Value 5
SYMATTR InstName V1
SYMBOL voltage -416 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 34 44 Left 2
WINDOW 3 32 67 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -304 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -41 75 Left 2
WINDOW 3 31 54 Left 2
SYMATTR SpiceLine Rser=1m
SYMATTR Value 24
SYMATTR InstName V3
SYMBOL voltage -208 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -92 149 Left 2
SYMATTR Value PULSE(0 3.0 0 1n 1n 33.3u 66.6u)
SYMATTR InstName V4
SYMBOL voltage -112 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -37 125 Left 2
SYMATTR Value PULSE(0 2.8 0 1n 1n 33.3u 66.6u)
SYMATTR InstName V5
SYMBOL AutoGenerated\\LM324 160 -224 R0
SYMATTR InstName U1
SYMBOL res -64 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k8
SYMBOL res 64 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -208 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k8
SYMBOL cap -208 -176 R0
SYMATTR InstName C1
SYMATTR Value 220n
SYMBOL cap 64 -176 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL cap 176 -320 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 18 72 VTop 2
SYMATTR InstName C4
SYMATTR Value 220n
SYMBOL AutoGenerated\\LM324 160 -496 R0
SYMATTR InstName U2
SYMBOL res -64 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k8
SYMBOL res 64 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -208 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k8
SYMBOL cap -208 -448 R0
SYMATTR InstName C2
SYMATTR Value 220n
SYMBOL cap 64 -448 R0
SYMATTR InstName C5
SYMATTR Value 100n
SYMBOL cap 80 -592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 220n
SYMBOL res 656 -224 R0
SYMATTR InstName R8
SYMATTR Value 0.1
SYMBOL res 368 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 33k
SYMATTR SpiceLine tol=1
SYMBOL res 368 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 33k
SYMATTR SpiceLine tol=1
SYMBOL res 496 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4k7
SYMATTR SpiceLine tol=1
SYMBOL res 416 240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 4k7
SYMATTR SpiceLine tol=1
SYMBOL res 656 -432 R0
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL res 624 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 704 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 752 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 220
SYMBOL cap 640 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1n
SYMBOL res 752 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 220
SYMBOL cap 640 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 1n
SYMBOL cap 864 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 26 VTop 2
SYMATTR InstName C9
SYMATTR Value 220p
SYMBOL res 384 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 680
SYMBOL res 480 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 30 66 VTop 2
SYMATTR InstName R18
SYMATTR Value 33k
SYMBOL res 384 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 4k7
SYMBOL res 288 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1k8
SYMBOL res 288 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 4k7
SYMBOL res 640 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 1k
SYMBOL res 768 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 220
SYMBOL cap 656 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 1n
SYMBOL res 736 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 2k2
SYMBOL cap 928 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 27 VTop 2
SYMATTR InstName C11
SYMATTR Value 2.2n
SYMBOL sw 672 -400 R180
WINDOW 0 18 28 Left 2
SYMATTR InstName SW
SYMBOL voltage 832 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 6m 1n 1n 1s 1s)
SYMBOL cap 592 -416 R0
SYMATTR InstName C12
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=100 Irms=1.4 Rser=0.0913262 Lser=0 mfg="KEMET" pn="C0805C104K1RAC" type="X7R"
SYMBOL AutoGenerated\\TL084 448 400 R0
SYMATTR InstName U3
SYMBOL AutoGenerated\\TL084 432 64 R0
SYMATTR InstName U4
SYMBOL AutoGenerated\\TL084 800 80 R0
SYMATTR InstName U5
SYMBOL AutoGenerated\\TL084 800 416 R0
SYMATTR InstName U6
SYMBOL npn 352 -432 R270
SYMATTR InstName Q6
SYMATTR Value 2N3055
SYMBOL npn 1280 96 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL npn 1360 160 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL pnp 1360 384 M180
SYMATTR InstName Q4
SYMATTR Value 2N2907
SYMBOL pnp 1280 448 M180
SYMATTR InstName Q5
SYMATTR Value 2N2907
SYMBOL res 1280 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 100
SYMBOL res 1536 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 10
SYMBOL res 976 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 100
SYMBOL res 1008 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 100
SYMBOL pnp 960 128 M180
SYMATTR InstName Q7
SYMATTR Value 2N2907
SYMBOL pnp 992 464 M180
SYMATTR InstName Q8
SYMATTR Value 2N2907
SYMBOL res 1168 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 1k
SYMBOL res 864 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 36 34 VTop 2
SYMATTR InstName R27
SYMATTR Value 6k8
SYMBOL polcap 544 -416 R0
SYMATTR InstName C13
SYMATTR Value 33µ
SYMATTR SpiceLine V=100 Irms=160m Rser=0.46 Lser=0 mfg="Nichicon" pn="UPR2A330MPH" type="Al electrolytic"
TEXT -504 344 Left 2 !.tran 0 10m 0m 1m uic
TEXT -8 -352 Left 2 ;360uVp-p noise output 3.3V/3ms
TEXT 440 160 Left 2 ;0-2.8V -> 0-20V
TEXT 504 448 Left 2 ;0-3V -> 0-5A
TEXT 640 -312 Left 2 !.model SW SW(Ron=0.01 Roff=1000Meg Vt=.5 Vh=-.4)
TEXT 960 -232 Left 2 !.options gmin=1e-10
TEXT 952 -216 Left 2 !.options abstol=1e-10
TEXT 960 -200 Left 2 !.options reltol=0.003
TEXT 952 -184 Left 2 !.options cshunt=1e-15
